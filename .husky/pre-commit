#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Regra #11: Manter cÃ³digo livre de erros (warnings sÃ£o permitidos durante desenvolvimento)
# Executar lint antes de commitar - apenas erros bloqueiam
echo "ğŸ” Executando ESLint..."
npm run lint -- --max-warnings=9999 || {
  echo "âŒ Erros de lint encontrados. Corrija antes de commitar."
  exit 1
}

# Verificar formataÃ§Ã£o antes de commitar
echo "âœ¨ Verificando formataÃ§Ã£o..."
npm run check-format || {
  echo "âŒ Erros de formataÃ§Ã£o encontrados. Execute 'npm run format' para corrigir."
  exit 1
}

# Executar testes antes de commitar
echo "ğŸ§ª Executando testes..."
npm test || {
  echo "âŒ Testes falharam. Corrija antes de commitar."
  exit 1
}

echo "âœ… Pre-commit checks passaram!"
